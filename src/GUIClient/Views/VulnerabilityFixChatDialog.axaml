<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:viewModels="clr-namespace:GUIClient.ViewModels"
        xmlns:avalonia="clr-namespace:Material.Icons.Avalonia;assembly=Material.Icons.Avalonia"
        mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
        x:Class="GUIClient.Views.VulnerabilityFixChatDialog"
        Width="800" Height="600"
        Title="VulnerabilityFixChatDialog"
        Name="WinVulFixChat">
    
    <Design.DataContext>
        <viewModels:VulnerabilityFixChatDialogViewModel/>
    </Design.DataContext>
    
    <Grid RowDefinitions="Auto,Auto,Auto,*,Auto,Auto,Auto">
        <TextBlock Grid.Row="0" Text="{Binding StrVulnerability}" Classes="header"/>
        <Grid Grid.Row="1" RowDefinitions="Auto,Auto,*" ColumnDefinitions="Auto,Auto" Margin="5">
            <StackPanel Grid.Row="0" Grid.Column="0" Orientation="Horizontal">
                <TextBlock  Text="{Binding StrName}" Classes="label"/> <TextBlock  Text=":" Classes="label"/>
                <TextBlock  Text="{Binding Vulnerability.Title}"  Classes="form_text"/>
            </StackPanel>
            <StackPanel Grid.Row="1" Grid.Column="0" Orientation="Horizontal">
                <TextBlock  Text="{Binding StrCreationDate}" Classes="label"/> <TextBlock  Text=":" Classes="label"/>
                <TextBlock  Text="{Binding Vulnerability.FirstDetection}" Classes="form_text" />
            </StackPanel>
        </Grid>
        <TextBlock Grid.Row="2" Text="{Binding StrMessages}" Classes="header" Margin="0 10 0 0"/>
        <ItemsControl Grid.Row="3" ItemsSource="{Binding Comments}" Margin="3">
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <Border Margin="0,10,0,0"
                            CornerRadius="5"
                            BorderBrush="Gray" BorderThickness="1"
                            Padding="5">
                        <StackPanel Orientation="Vertical">
                            <StackPanel Orientation="Horizontal" Classes="header2">
                                <TextBlock Margin="5 0"  
                                           Text="{Binding Date}"/>
                                <TextBlock Text=" - "/>
                                <TextBlock Margin="5 0" FontWeight="Bold" 
                                           Text="{Binding CommenterName}"/>
                            </StackPanel>
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="{Binding #WinVulFixChat.DataContext.StrComment}"/>
                                <TextBlock Text=" : "/>
                                <TextBlock Margin="5 0" 
                                           Text="{Binding Text}"/>
                            </StackPanel>
                        </StackPanel>
                    </Border>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl>
        <TextBlock Grid.Row="4" Text="{Binding StrNewComment}" Classes="header" Margin="0 10 0 0"/>
        <TextBox Grid.Row="5" Height="160" AcceptsReturn="True" Text="{Binding NewComment}" Margin="3"/>
        <StackPanel Grid.Row="6" Orientation="Horizontal" HorizontalAlignment="Right" Margin="3 ">
            <Button Command="{Binding BtSendClicked}" Margin="5 0 0 0" >
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center"  >
                    <avalonia:MaterialIcon Kind="Send" />
                    <TextBlock Text="{Binding StrSend}" Margin="5 2 0 0"/>
                </StackPanel>
            </Button>
            <Button Command="{Binding BtCloseClicked}" Margin="5 0 0 0" >
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center"  >
                    <avalonia:MaterialIcon Kind="Close" />
                    <TextBlock Text="{Binding StrClose}" Margin="5 2 0 0"/>
                </StackPanel>
            </Button>
            <Button Command="{Binding BtCancelClicked}" Margin="5 0 0 0" >
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center"  >
                    <avalonia:MaterialIcon Kind="Cancel" />
                    <TextBlock Text="{Binding StrCancel}" Margin="5 2 0 0"/>
                </StackPanel>
            </Button>
        </StackPanel>
    </Grid>
</Window>
