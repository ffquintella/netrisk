using ClientServices.Interfaces;
using ReactiveUI;

namespace GUIClient.ViewModels.Reports.Graphs;

public class VulnerabilityNumbersViewModel: GraphsViewModelBase
{
    #region LANGUAGES

        private string StrNumbers => Localizer["Numbers"] ;
        private string StrCritical => Localizer["Critical"]+ ": ";
        private string StrHigh => Localizer["High"]+ ": ";
        private string StrMedium => Localizer["Medium"]+ ": ";
        private string StrLow => Localizer["Low"]+ ": ";
        

    #endregion
    
    #region PROPERTIES

    private string _critical;

    public string Critical
    {
        get => _critical;
        set => this.RaiseAndSetIfChanged(ref _critical, value);
    }
    
    private string _high;
    public string High
    {
        get => _high;
        set => this.RaiseAndSetIfChanged(ref _high, value);
    }
    
    private string _medium;
    public string Medium
    {
        get => _medium;
        set => this.RaiseAndSetIfChanged(ref _medium, value);
    }
    private string _low;
    public string Low
    {
        get => _low;
        set => this.RaiseAndSetIfChanged(ref _low, value);
    }
    
    
    #endregion
    
    #region SERVICES
    private IStatisticsService StatisticsService { get; } = GetService<IStatisticsService>();
    #endregion

    #region CONSTRUCTOR
    
    public VulnerabilityNumbersViewModel()
    {
        AuthenticationService.AuthenticationSucceeded += (_, _) =>
        {
            LoadData();
        };
    }

    #endregion
    
    #region METHODS

    private void LoadData()
    {
        var numbers = StatisticsService.GetVulnerabilityNumbers();
        Critical = numbers.Critical.ToString();
        High = numbers.High.ToString();
        Medium = numbers.Medium.ToString();
        Low = numbers.Low.ToString();
        
    }
    
    #endregion

}