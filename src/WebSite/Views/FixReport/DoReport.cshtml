@using WebSite.ExtensionMethods
@model DoFixReportViewModel

@{
    ViewBag.Title = "Do Request";
    Layout = "_Layout";
}

<h2>@Html.Translate("Vulnerability Fix Report")</h2>

<div class="card text-center">
    <div class="card-header">
         @Html.Translate("Vulnerability Details")
    </div>
    <div class="card-body text-left">
        <div class="row">
            <h5 class="card-title">@Model.Title</h5>
            <div class="col-md-6 ">
                Description:
                <p>@Model.Description</p>
            </div>
            <div class="col-md-6 ">
                Solution:
                <p>@Model.Solution</p>
            </div>
        </div>
        <div class="row">
            <h5 class="card-title">@Html.Translate("Host")</h5>
            <div class="col-md-12 ">
                <p><strong>HostName:</strong> @Model.HostName</p>
            </div>
        </div>

    </div>
    <div class="card-footer text-muted">
        @Model.Score
    </div>
    
    <h2>@Html.Translate("Report")</h2>
    <form asp-action="DoReport" method="post">
        
        @if (Model.IsTeamFix)
        {
            <div asp-validation-summary="All" class="text-danger"></div>
            <div class="form-group">
                <label asp-for="FixerId">@Html.Translate("Fixer Name"):</label>
                <select asp-for="FixerId" asp-items="Model.Fixers" class="form-control" style="margin: 5px 0"></select>
            </div>
        }
        else
        {
            <div class="form-group">
                <label asp-for="FixerEmail">@Html.Translate("Fixer Email"):</label>
                <input asp-for="FixerEmail" class="form-control" style="margin: 5px 0" readonly>
            </div>
            <br/>
            <label asp-for="FixDate">@Html.Translate("Proposed Fix Date"):</label>
            @Html.TextBox("FixDate", String.Format("{0:d}", Model.FixDate.ToString("yyyy-MM-dd")),
                new { @class = "datefield", type = "date" })
        }
        
    </form>
</div>